<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>title</title>
    <link rel="stylesheet" href="../styles.css" />
    <script src="probe-generator.js"></script>
</head>
<body>
            <!--------------------------->
            <!------- Main Trials ------->
            <!--------------------------->

                <!-- Trial 1 -->

                <div id="trial-1-screen" style="display: block;">
                    <!-- Video Screen-->
                    <div id="video-1-screen" style ="position:relative; width:960px; height:540px">
                        <video id="video1" width="960" height="540" autoplay muted>
                            <source src="../videos/sample_video.mp4" type="video/mp4">
                        </video>
                        <canvas id="canvas-1" width="960" height="540" class="canvas"></canvas>
                    </div>
                    <!-- Progress Screen -->
                    <div id="progress-1-screen" style="display: none;">
                        <h1>Progress 1</h1>
                        <!-- displays a progress bar -->
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p>Press the spacebar to continue.</p>
                    </div>
                </div>

                <script>
                // Call runTrialWithProbes when the page has fully loaded
                window.addEventListener('load', function () {
                    runTrialWithProbes(1, 'canvas-1', 'video1');
                });

                // ended video moves to progress screen
                var video = document.getElementById("video1");
                video.addEventListener('ended', function(e) {
                    document.getElementById("progress-1-screen").style.display = "block";
                    document.getElementById("video-1-screen").style.display = "none";
                    document.addEventListener('keydown', startTrial1Handler);
                });
                
                // spacebar moves to trial 2
                function startTrial1Handler(event) {
                    const trial1Screen = document.getElementById("trial-1-screen");
                    const progress1Screen = document.getElementById("progress-1-screen");
                    if (event.code === "Space" && progress1Screen.style.display === 'block') {
                        trial1Screen.style.display = 'none';
                        document.getElementById('trial-2-screen').style.display = 'block';
                        document.removeEventListener('keydown', startTrial1Handler);
                        runTrialWithProbes(2, 'canvas-2', 'video2');
                    }
                };

                </script>

                <!-- Trial 2 -->
                
                <div id="trial-2-screen" style="display: none;">
                    <!-- Video Screen-->
                    <div id="video-2-screen" style ="position:relative; width:960px; height:540px">
                        <video id="video2" width="960" height="540" autoplay muted>
                            <source src="../videos/sample_video.mp4" type="video/mp4">
                        </video>
                        <canvas id="canvas-2" width="960" height="540" class="canvas"></canvas>
                    </div>
                    <!-- Progress Screen -->
                    <div id="progress-2-screen" style="display:none;">
                        <h1>Progress 2</h1>
                        <!-- displays a progress bar -->
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p>Press the spacebar to continue.</p>
                    </div>
                </div>

                <script>
                // ended video moves to progress screen
                var video = document.getElementById("video2");
                video.addEventListener('ended', function(e) {
                    document.getElementById("progress-2-screen").style.display = "block";
                    document.getElementById("video-2-screen").style.display = "none";
                    document.addEventListener('keydown', startTrial2Handler);
                });

                // spacebar moves to trial 3
                function startTrial2Handler(event) {
                    const trial2Screen = document.getElementById("trial-2-screen");
                    const progress2Screen = document.getElementById("progress-2-screen");
                    if (event.code === "Space" && progress2Screen.style.display === 'block') {
                        trial2Screen.style.display = 'none';
                        document.getElementById('trial-3-screen').style.display = 'block';
                        document.removeEventListener('keydown', startTrial2Handler);
                        runTrialWithProbes(3, 'canvas-3', 'video3');
                    }
                };
                
                </script>
            
                <!-- Trial 3 -->
                
                <div id="trial-3-screen" style="display: none;">
                    <!-- Video Screen-->
                    <div id="video-3-screen" style ="position:relative; width:960px; height:540px">
                        <video id="video3" width="960" height="540" autoplay muted>
                            <source src="../videos/sample_video.mp4" type="video/mp4">
                        </video>
                        <canvas id="canvas-3" width="960" height="540" class="canvas"></canvas>
                    </div>
                    <!-- Progress Screen -->
                    <div id="progress-3-screen" style="display:none;">
                        <h1>Progress 3</h1>
                        <!-- displays a progress bar -->
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p>Press the spacebar to continue.</p>
                    </div>
                </div>

                <script>
                // ended video moves to progress screen
                var video = document.getElementById("video3");
                video.addEventListener('ended', function(e) {
                    document.getElementById("progress-3-screen").style.display = "block";
                    document.getElementById("video-3-screen").style.display = "none";
                    document.addEventListener('keydown', startTrial3Handler);
                });

                // spacebar moves to trial 4
                function startTrial3Handler(event) {
                    const trial3Screen = document.getElementById("trial-3-screen");
                    const progress3Screen = document.getElementById("progress-3-screen");
                    if (event.code === "Space" && progress3Screen.style.display === 'block') {
                        progress3Screen.style.display = 'none';
                        trial3Screen.style.display = 'none';
                        document.getElementById('trial-4-screen').style.display = 'block';
                        document.removeEventListener('keydown', startTrial3Handler);
                        runTrialWithProbes(4, 'canvas-4', 'video4');
                    }
                };
                </script>

                <!-- Trial 4 -->

                <div id="trial-4-screen" style="display: none;">
                    <!-- Video Screen-->
                    <div id="video-4-screen" style ="position:relative; width:960px; height:540px">
                        <video id="video4" width="960" height="540" autoplay muted>
                            <source src="../videos/sample_video.mp4" type="video/mp4">
                        </video>
                        <canvas id="canvas-4" width="960" height="540" class="canvas"></canvas>
                    </div>
                    <!-- Progress Screen -->
                    <div id="progress-4-screen" style="display:none;">
                        <h1>Progress</h1>
                        <!-- displays a progress bar -->
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p>Press the spacebar to continue.</p>
                    </div>
                </div>

                <script>
                // ended video moves to progress screen
                var video = document.getElementById("video4");
                video.addEventListener('ended', function(e) {
                    document.getElementById("progress-4-screen").style.display = "block";
                    document.getElementById("video-4-screen").style.display = "none";
                    document.addEventListener('keydown', startTrial4Handler);
                });

                function startTrial4Handler(event) {
                    const trial4Screen = document.getElementById("trial-4-screen");
                    const progress4Screen = document.getElementById("progress-4-screen");
                    if (event.code === "Space" && progress4Screen.style.display === 'block') {
                        progress4Screen.style.display = 'none';
                        trial4Screen.style.display = 'none';
                        document.removeEventListener('keydown', startTrial4Handler);
                    }
                };
                </script>


            </body>
        </html>
